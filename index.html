<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizFinder JA</title>
    <style>
        /* Reset and Base Styles */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', Arial, sans-serif; background: linear-gradient(135deg, #f5f7fa, #e0e8f5); color: #333; line-height: 1.6; }

        /* Header */
        header { background: linear-gradient(90deg, #2ecc71, #27ae60); color: white; text-align: center; padding: 20px; font-size: 28px; font-weight: bold; text-transform: uppercase; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); position: relative; }
        #businessName { cursor: pointer; }
        #profile-btn, #login-btn, #signup-btn { position: absolute; top: 50%; transform: translateY(-50%); background: white; color: #2ecc71; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; transition: background 0.3s, transform 0.2s; font-weight: 500; }
        #profile-btn { right: 20px; display: none; }
        #login-btn { right: 120px; }
        #signup-btn { right: 220px; }
        #profile-btn:hover, #login-btn:hover, #signup-btn:hover { background: #f8f9fa; transform: translateY(-2px); }

        /* Container */
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }

        /* Business Cards and Store Page */
        .business-card, .store-page { background: white; padding: 25px; margin-bottom: 25px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); transition: transform 0.3s, box-shadow 0.3s; }
        .business-card:hover, .store-page:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15); }
        .business-card h3, .store-page h3 { margin: 0 0 15px; color: #2ecc71; font-size: 1.5em; }
        .business-card .category, .store-page .category { font-style: italic; color: #7f8c8d; margin-bottom: 15px; }
        .business-card img, .store-page img { width: 100%; max-height: 250px; object-fit: cover; border-radius: 8px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }
        .contact a { margin-right: 15px; text-decoration: none; color: #3498db; transition: color 0.3s; }
        .contact a:hover { color: #2980b9; }
        .views { font-size: 14px; color: #7f8c8d; margin-top: 10px; }

        /* Buttons */
        button { background: #2ecc71; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; transition: background 0.3s, transform 0.2s; font-weight: 500; }
        button:hover { background: #27ae60; transform: translateY(-2px); }

        /* Search Bar */
        #search-bar { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 8px; font-size: 1em; transition: border-color 0.3s; }
        #search-bar:focus { border-color: #2ecc71; outline: none; }
    </style>
</head>
<body>
    <header>
        <span id="businessName">BizFinder JA</span>
        <button id="profile-btn">Profile</button>
        <button id="login-btn">Login</button>
        <button id="signup-btn">Sign Up</button>
    </header>

    <div class="container" id="main-content">
        <input type="text" id="search-bar" placeholder="Search businesses..." onkeyup="searchBusinesses()">
        <div id="feed"></div>
        <div id="store-page" style="display: none;"></div>
    </div>

    <script>
        // Data initialization
        let businesses = JSON.parse(localStorage.getItem('businesses')) || generateDummyBusinesses(10);
        let displayedCount = 5;

        // DOM elements
        const feed = document.getElementById('feed');
        const storePage = document.getElementById('store-page');
        const searchBar = document.getElementById('search-bar');
        const businessName = document.getElementById('businessName');

        // Generate dummy businesses with Jamaican context
        function generateDummyBusinesses(count) {
            const categories = ['Food & Drinks', 'Fashion & Accessories', 'Tech & Gadgets', 'Home Goods', 'Beauty & Wellness'];
            const locations = ['Montego Bay', 'Kingston', 'Ocho Rios', 'Negril', 'Mandeville'];
            const businessNames = ['Reggae Eats', 'Rasta Threads', 'Tech Jam JA', 'Island Home Depot', 'JAM Beauty Hub'];
            const products = [
                { name: 'Ackee & Saltfish', desc: 'National dish with a spicy twist', photo: 'https://via.placeholder.com/300x200.png?text=Ackee+Saltfish' },
                { name: 'Bob Marley Tee', desc: 'Iconic reggae-inspired t-shirt', photo: 'https://via.placeholder.com/300x200.png?text=Bob+Marley+Tee' },
                { name: 'JAM Wireless Speaker', desc: 'Portable speaker with island vibes', photo: 'https://via.placeholder.com/300x200.png?text=Speaker' },
                { name: 'Coconut Bowl', desc: 'Handcrafted from local coconuts', photo: 'https://via.placeholder.com/300x200.png?text=Coconut+Bowl' },
                { name: 'Mango Body Butter', desc: 'Rich moisturizer with tropical scent', photo: 'https://via.placeholder.com/300x200.png?text=Body+Butter' }
            ];
            const businesses = [];
            for (let i = 0; i < count; i++) {
                const category = categories[i % categories.length];
                const location = locations[i % locations.length];
                const name = businessNames[i % businessNames.length] + ` ${i + 1}`;
                const product = products[i % products.length];
                businesses.push({
                    id: Date.now() + i,
                    name,
                    category,
                    products: i % 2 === 0 ? [product] : [], // Some stores have no products
                    desc: `Your go-to ${category.toLowerCase()} spot in ${location}.`,
                    whatsapp: `876555${String(i).padStart(4, '0')}`,
                    instagram: `${name.toLowerCase().replace(/\s/g, '')}_ja`,
                    location,
                    displayPhoto: 'https://via.placeholder.com/300x200.png?text=Store+Photo',
                    views: Math.floor(Math.random() * 100),
                    hours: 'Mon-Sat: 9 AM - 6 PM',
                    tagline: `Experience ${location}â€™s finest!`
                });
            }
            return businesses;
        }

        // Display feed
        function displayFeed(filteredBusinesses = businesses) {
            feed.style.display = 'block';
            storePage.style.display = 'none';
            const businessesToShow = filteredBusinesses.slice(0, displayedCount);
            feed.innerHTML = '';
            businessesToShow.forEach((business) => {
                const card = document.createElement('div');
                card.className = 'business-card';
                const featuredProduct = business.products.length > 0 ? business.products[0] : { name: 'Coming soon!', photo: '' };
                card.innerHTML = `
                    <h3>${business.name}</h3>
                    <p class="category">${business.category}</p>
                    <img src="${business.displayPhoto}" alt="${business.name}">
                    <p><strong>Featured:</strong> ${featuredProduct.name}</p>
                    ${featuredProduct.photo ? `<img src="${featuredProduct.photo}" alt="${featuredProduct.name}">` : ''}
                    <p>${business.tagline}</p>
                    <p><strong>Location:</strong> ${business.location}</p>
                    <div class="contact">
                        <a href="https://wa.me/${business.whatsapp}" target="_blank">WhatsApp</a>
                        <a href="https://instagram.com/${business.instagram}" target="_blank">Instagram</a>
                    </div>
                    <p class="views">Views: ${business.views}</p>
                    <button data-id="${business.id}" class="view-store-btn">View Store</button>
                `;
                feed.appendChild(card);
            });
        }

        // Event delegation for "View Store" buttons
        feed.addEventListener('click', (e) => {
            if (e.target.classList.contains('view-store-btn')) {
                const businessId = parseInt(e.target.getAttribute('data-id'));
                viewStore(businessId);
            }
        });

        // View store function
        function viewStore(businessId) {
            const business = businesses.find(b => b.id === businessId);
            if (!business) {
                console.error('Business not found');
                return;
            }
            business.views++;
            localStorage.setItem('businesses', JSON.stringify(businesses));
            feed.style.display = 'none';
            storePage.style.display = 'block';
            storePage.innerHTML = `
                <button onclick="displayFeed()">Back to Feed</button>
                <h3>${business.name}</h3>
                <p class="category">${business.category}</p>
                <img src="${business.displayPhoto}" alt="${business.name}">
                <p>${business.desc}</p>
                <p><strong>Location:</strong> ${business.location}</p>
                <p><strong>Hours:</strong> ${business.hours || 'Call for hours'}</p>
                <p><strong>Tagline:</strong> ${business.tagline}</p>
                <div class="contact">
                    ${business.whatsapp ? `<a href="https://wa.me/${business.whatsapp}" target="_blank">WhatsApp</a>` : '<span>Contact us for WhatsApp</span>'}
                    ${business.instagram ?_ks = `<a href="https://instagram.com/${business.instagram}" target="_blank">Instagram</a>` : '<span>No Instagram yet</span>'}
                </div>
                <p class="views">Views: ${business.views}</p>
                <h4>Products</h4>
                ${business.products.length > 0 ? business.products.map(p => `
                    <div>
                        <p><strong>${p.name}</strong></p>
                        <img src="${p.photo}" alt="${p.name}">
                        <p>${p.desc}</p>
                    </div>
                `).join('') : '<p>No products available yet. Check back soon!</p>'}
            `;
        }

        // Search functionality
        function searchBusinesses() {
            const query = searchBar.value.toLowerCase().trim();
            const filteredBusinesses = businesses.filter(biz => 
                biz.name.toLowerCase().includes(query) || 
                biz.category.toLowerCase().includes(query) || 
                biz.location.toLowerCase().includes(query)
            );
            displayedCount = 5;
            displayFeed(filteredBusinesses);
        }

        // Header click to shuffle or return to feed
        businessName.addEventListener('click', function() {
            if (feed.style.display === 'block') {
                const shuffled = [...businesses].sort(() => Math.random() - 0.5);
                displayFeed(shuffled);
            } else {
                displayFeed();
            }
        });

        // Initial load
        displayFeed();
    </script>
</body>
</html>